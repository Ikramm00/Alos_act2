gold_price_flow  =  Flux (
    add_metadata (
        name = "prix-de-l'or" ,
        title = "Prix de l'or" ,
        page d' accueil = 'http://www.bundesbank.de' ,
        licences = [
            {
                "id" : "odc-pddl" ,
                "nom" : "public_domain_dedication_and_license" ,
                "version" : "1.0" ,
                "URL" : "http://opendatacommons.org/licenses/pddl/1.0/"
            }
        ],
        sources = [
            {
              "name" : "bundesbank-gold-prices" ,
              "chemin" : "'http://www.bundesbank.de/cae/servlet/StatisticDownload?tsId=BBEX3.M.XAU.USD.EA.AC.C06&its_csvFormat=en&its_fileFormat=csv&mode=its'" ,
              "title" : "Cours de l'or de la Bundesbank"
            }
        ],
        vues = [
            {
                "nom" : "graphique" ,
                "title" : "Prix de l'or (mensuel en USD)" ,
                "specType" : "simple" ,
                "spec" : {
                    "type" : "lignes-et-points" ,
                    "groupe" : "Date" ,
                    "série" : [
                        "Prix"
                    ]
                }
            }
        ],
        lié = [
            {
                "title" : "Prix du pétrole" ,
                "chemin" : "/core/prix-du-petrole" ,
                "éditeur" : "core" ,
                "formats" : [ "CSV" , "JSON" ]
            },
            {
                "title" : "Gaz naturel" ,
                "chemin" : "/core/gaz-naturel" ,
                "éditeur" : "core" ,
                "formats" : [ "CSV" , "JSON" ]
            }
        ],
        version = "0.2.0"
    ),
    charge (
        load_source = 'http://www.bundesbank.de/cae/servlet/StatisticDownload?tsId=BBEX3.M.XAU.USD.EA.AC.C06&its_csvFormat=en&its_fileFormat=csv&mode=its' ,
        skip_rows = [ 1 , 2 , 3 , 4 , 5 , - 1 ],
        headers = [ 'Date' , 'Prix' , 'Colonne vide' ],
        format = 'csv' ,
        nom = 'annuel'
    ),
    extract_december_rows ,
    charge (
        load_source = 'http://www.bundesbank.de/cae/servlet/StatisticDownload?tsId=BBEX3.M.XAU.USD.EA.AC.C06&its_csvFormat=en&its_fileFormat=csv&mode=its' ,
        skip_rows = [ 1 , 2 , 3 , 4 , 5 , - 1 ],
        headers = [ 'Date' , 'Prix' , 'Colonne vide' ],
        format = 'csv' ,
        nom = 'mensuel'
    ),
    update_resource ( 'monthly' , ** { 'path' : 'data/monthly.csv' , 'dpp:streaming' : True }),
    update_resource ( 'annual' , ** { 'path' : 'data/annual.csv' , 'dpp:streaming' : True }),
    set_type ( 'Date' , resources = 'annuel' , type = 'annéemois' ),
    set_type ( 'Prix' , ressources = 'annuel' , type = 'nombre' ),
    set_type ( 'Date' , resources = 'mensuel' , type = 'annéemois' ),
    set_type ( 'Prix' , ressources = 'mensuel' , type = 'nombre' ),
    valider (),
    delete_fields ([ 'Colonne vide' ], ressources = Aucun )
)


 flux def ( paramètres , paquet de données , ressources , statistiques ):
    retourner  gold_price_flow


si  __nom__  ==  '__main__' :
    gold_price_flow . processus ()